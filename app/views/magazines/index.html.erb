<h1>Listing magazines</h1>
<!-- TODO: Naoufal: This file might have duplicate code used in magazines/_indexmag.html.erb, so
                    consider rewriting the code to avoid repetition-->
<table>
  <tr>
    <th>Name</th>
    <th>Date</th>
    <th>Volume</th>
    <th>Number</th>
    <th>Status</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @magazines.each do |magazine| %>
  <tr>
    <td><%= magazine.name %></td>
    <td><%= magazine.date %></td>
    <td><%= magazine.volume %></td>
    <td><%= magazine.number %></td>
    <td><%= magazine.status %></td>
    <!-- Naoufal -->
    <!-- TODO: Add condition to show the Read link only if the magazine has at least one article-->
    <% if magazine.articles[0] != nil %>
        <td><%= link_to 'Read', cover_magazine_path(magazine) %></td>
        <!--td><!--%= link_to 'Read', read_article_path(magazine.articles[0]) %></td><!-- Start reading from the first article -->
    <% else %>
        <td>Empty</td>
    <% end %>
    <td><%= link_to 'TOC', toc_magazine_path(magazine) %></td>
    <!-- end Naoufal -->
    <td><%= link_to 'Show', magazine %></td>
    <td><%= link_to 'Edit', edit_magazine_path(magazine) %></td>
    <td><%= link_to 'Destroy', magazine, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Magazine', new_magazine_path %>
